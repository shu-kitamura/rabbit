# AGENTS.md

## 目的と概要

このプロジェクトは、ターミナル(CLI/TUI)上でウサギが動くコマンドを実装する。  
別の動物も動かせるように、拡張性を考慮した設計にする。

## エージェントの方針

### 1. 設計エージェント

- 要件や仕様を整理し、機能の分割やモジュール構成を提案する
- キーとなるデータ構造やアルゴリズムの方針を示す
- 必要に応じて擬似コードやフローチャートで挙動を説明する
- Rust CLIアプリに適したクレート選定やエラーハンドリング指針など、実装上の方針も提示する

### 2. テストエージェント

- 要件・設計から想定される正常系・異常系のシナリオを挙げる
- Rustのテストフレームワーク（#[test]関数）形式でユニットテストコードを生成する
- エッジケースやエラーハンドリングの確認項目も含める
- （必要に応じて）CLI全体の振る舞いを検証する統合テストや例示的な使用方法を記述する

### 3. 実装エージェント

- 設計で示されたモジュール構造に沿って、各関数や構造体の中身を実装する
- テストが通るようにロジックを実現し、必要に応じて適切なエラーハンドリングや境界チェックを行う
- Rustのコーディング規約・ベストプラクティスに従ったコードスタイルを維持する（例: 意味のある変数名、適切なResultの扱い）
- コンパイルが通る完備したコードを出力する（必要ならuse宣言やCargo.tomlへの依存追加にも言及する）

## 開発フロー

このプロジェクトの開発は、以下のような手順で進めます。

1. 設計フェーズ  
   まず設計エージェントにより高レベル設計を作成します。  
2. テストフェーズ  
   次にテストエージェントを使い、上記設計に基づいたテストコードを生成します。  
   想定どおりの振る舞いを網羅するテストケースが出揃っているか確認し、不足があればテストを追加・修正します。  
3. 実装フェーズ  
   準備した設計とテストを元に、実装エージェントでコードを生成します。  
   Codexにはテストがすべて通ることを目標にコードを書かせます。  
   
   実装後は以下のテスト・リンター・フォーマッタが通ることを確認します。  
   ```shell
   cargo test
   cargo fmt
   cargo clippy
   ```
4. 反復改善  
   テストが失敗した場合や設計との差異があった場合、再度実装エージェントに不足分の実装やバグ修正を依頼する。    
   設計やテストケースを追加し、再度実装エージェントで修正する、というサイクルを繰り返します。  
   全テストがグリーンになり、期待どおりの動作が確認できたら開発完了となります。  
